---
# [ Service Identity ]
socket_proxy_service_name: "socket-proxy"
socket_proxy_container_name: "socket-proxy"

# [ Image ]
socket_proxy_image: "wollomatic/socket-proxy"
socket_proxy_tag: "1"

# [ Paths ]
socket_proxy_compose_dir: "{{ docker_base_dir }}/{{ socket_proxy_service_name }}"

# [ Access Control ]
socket_proxy_allow_from: "0.0.0.0/0"

# [ Security Policy - Allowed Actions (Regex) ]
# Поддержка запросов с/без префикса версии API (/v1.24/containers/json или /containers/json)
# Это нужно для совместимости с разными клиентами (Autoheal, Caddy, Dozzle)
socket_proxy_allow_get_pattern: "(/v[0-9.]+)?/(version|containers/.*|events.*|info|networks.*|tasks.*|nodes.*|services.*|distribution.*|images.*|volumes.*)"
socket_proxy_allow_post_pattern: "(/v[0-9.]+)?/containers/[a-zA-Z0-9_.-]+/(start|stop|restart|wait)"
socket_proxy_allow_head_pattern: "/_ping"

# [ Watchdog & Health ]
socket_proxy_watchdog_interval: "360"
socket_proxy_stop_on_watchdog: "true"
socket_proxy_shutdown_grace: "10"
socket_proxy_allow_healthcheck: "true"

# [ Resources ]
socket_proxy_memory_limit: "64M"
