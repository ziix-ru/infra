---
# Service names
tuwunel_service_name: "tuwunel"
tuwunel_livekit_service_name: "livekit"
tuwunel_jwt_service_name: "lk-jwt-service"

# Directories
tuwunel_compose_dir: "{{ docker_config_dir }}/{{ tuwunel_service_name }}"
tuwunel_data_dir: "{{ docker_data_dir }}/{{ tuwunel_service_name }}"
tuwunel_livekit_dir: "{{ tuwunel_compose_dir }}/livekit"

# Docker images
tuwunel_image: "docker.io/jevolk/tuwunel:latest"
tuwunel_livekit_image: "livekit/livekit-server:latest"
tuwunel_jwt_image: "ghcr.io/element-hq/lk-jwt-service:latest"

# Domains
tuwunel_domain: "{{ matrix_domain | default('matrix.' ~ base_domain) }}"
tuwunel_server_name: "{{ base_domain }}"
tuwunel_livekit_domain: "livekit.{{ base_domain }}"

# Ports
tuwunel_port: 8008
tuwunel_livekit_http_port: 7880
tuwunel_livekit_tcp_port: 7881
tuwunel_livekit_udp_start: 50000
tuwunel_livekit_udp_end: 50050
tuwunel_jwt_port: 8081

# Features
tuwunel_livekit_enabled: true
tuwunel_allow_registration: true
tuwunel_allow_federation: true
tuwunel_allow_encryption: true

# Secrets
tuwunel_registration_token: "{{ vault_matrix.registration_token | default('') }}"
tuwunel_livekit_key: "{{ vault_matrix.livekit.key }}"
tuwunel_livekit_secret: "{{ vault_matrix.livekit.secret }}"

# Traefik
tuwunel_docker_network: "{{ docker_network_name }}"
tuwunel_traefik_entrypoint: "websecure"
tuwunel_traefik_certresolver: "letsencrypt"

# Performance
tuwunel_max_request_size: 20971520  # 20MB
tuwunel_ulimit_nofile_soft: 1048567
tuwunel_ulimit_nofile_hard: 1048567

# Logging
tuwunel_log_level: "info"
tuwunel_log_colors: true
tuwunel_livekit_log_level: "info"
tuwunel_jwt_log_level: "info"

# LDAP Integration (OFFICIAL CONFIG)
tuwunel_ldap_enabled: true
tuwunel_ldap_uri: "ldap://lldap:3890"
tuwunel_ldap_base_dn: "ou=people,dc=ziix,dc=ru"
tuwunel_ldap_bind_dn: "uid={{ vault_identity.lldap.admin_login }},ou=people,dc=ziix,dc=ru"
tuwunel_ldap_bind_password: "{{ vault_identity.lldap.admin_password | default('') }}"
# Файл внутри контейнера
tuwunel_ldap_bind_password_file: "/var/lib/tuwunel/.ldap_bind_password"
# Фильтр по документации (используем {username})
tuwunel_ldap_filter: "(&(objectClass=person)(uid={username}))"
tuwunel_ldap_uid_attribute: "uid"
tuwunel_ldap_mail_attribute: "mail"
tuwunel_ldap_name_attribute: "cn"
