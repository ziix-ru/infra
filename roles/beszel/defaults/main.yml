---
beszel:
  service: "beszel"

  # Paths
  path: "{{ docker.base_dir }}/beszel"
  data_dir: "{{ docker.base_dir }}/beszel/hub_data"

  # --- DOMAINS ---
  domain: "mon.{{ domain.base }}"

  # --- HUB CONFIG ---
  hub:
    image: "henrygd/beszel:latest"
    port: 8090
    memory: "128M"

  # --- AGENT CONFIG ---
  agent:
    image: "henrygd/beszel-agent:latest"
    memory: "64M"
    # Agent key from Vault (optional, otherwise auto-generated)
    key: "{{ vault_beszel.agent_key | default('') }}"

  # --- SECRETS (Initial Admin) ---
  admin:
    email: "{{ vault_beszel.admin_email | default('') }}"
    password: "{{ vault_beszel.admin_password | default('') }}"

  # --- OIDC (PocketID) ---
  oidc:
    enabled: true # Toggle logic if needed
    identity_domain: "id.{{ domain.base }}"
    admin_dn: "admin" # For PocketID token generation
    client_id: "{{ vault_beszel.client_id | default('') }}"
    client_secret: "{{ vault_beszel.client_secret | default('') }}"

  # --- INTEGRATIONS ---
  autoheal: true
  socket_proxy: "{{ enable.socket_proxy | default(false) }}"

  # --- HEALTHCHECK ---
  healthcheck:
    interval: "30s"
    timeout: "5s"
    retries: 3
